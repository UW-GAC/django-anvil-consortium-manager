# content of: tox.ini , put in same dir as setup.py
[tox]
envlist = py{38,39,310}-django{32,41}-{sqlite,mariadb},cov
isolated_build = true

[testenv]
deps =
    django32: Django==3.2.*
    django40: Django==4.0.*
    django41: Django==4.1.*
    responses
    factory-boy
    coverage
    django-coverage-plugin
    freezegun
    mariadb: mysqlclient
passenv = *
commands =
    sqlite: coverage run -p ./manage.py test anvil_consortium_manager --settings=anvil_consortium_manager.tests.settings.test
    mariadb: coverage run -p ./manage.py test anvil_consortium_manager --settings=anvil_consortium_manager.tests.settings.test_mariadb
    cov: coverage combine
    cov: coverage xml

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310

[gh-actions:env]
BACKEND =
    sqlite: sqlite
    mariadb: mariadb
