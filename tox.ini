# content of: tox.ini , put in same dir as setup.py
[tox]
envlist = py{38,39,310}-django{32,41}-{sqlite,mysql}
isolated_build = true

[testenv]
deps =
    django32: Django==3.2.*
    django40: Django==4.0.*
    django41: Django==4.1.*
    responses
    factory-boy
    coverage
    django-coverage-plugin
    freezegun
    mysql: mysqlclient
passenv =
    DBNAME
    DBUSER
    DBPASSWORD
    DBHOST
    DBBACKEND
    DBPORT
commands =
    coverage run -p ./manage.py test anvil_consortium_manager --settings=anvil_consortium_manager.tests.settings.test

[testenv:py{38,39,310}-django{32,41}-mysql]
setenv =
    DBBACKEND = mysql

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310

[gh-actions:env]
DBBACKEND =
    sqlite3: sqlite
    mysql: mysql
