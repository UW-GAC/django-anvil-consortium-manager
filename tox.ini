# content of: tox.ini , put in same dir as setup.py
[tox]
envlist = py{38,39,310}-{sqlite,mariadb}
isolated_build = true

[testenv]
deps =
    Django==3.2.*
    responses
    factory-boy
    coverage
    django-coverage-plugin
    mariadb: mysqlclient
passenv = *
commands =
    sqlite: coverage run ./manage.py test anvil_consortium_manager --settings=anvil_consortium_manager.tests.settings.test
    mariadb: coverage run ./manage.py test anvil_consortium_manager --settings=anvil_consortium_manager.tests.settings.local_mariadb
    coverage xml

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310

[gh-actions:env]
BACKEND =
    sqlite: sqlite
    mariadb: mariadb
